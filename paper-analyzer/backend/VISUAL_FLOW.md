# Enhanced Visualization Pipeline - Visual Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                           USER MAKES REQUEST                                â”‚
â”‚                                                                             â”‚
â”‚   Query: "Compare training procedures across papers"                       â”‚
â”‚   Paper IDs: ["paper_1", "paper_2", "paper_3"]                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       LOAD ALL EXTRACTOR DATA                               â”‚
â”‚                                                                             â”‚
â”‚   For each paper, load ALL available extractors:                           â”‚
â”‚   â”œâ”€ Contributions                                                          â”‚
â”‚   â”œâ”€ Experiments                                                            â”‚
â”‚   â”œâ”€ Architectures                                                          â”‚
â”‚   â”œâ”€ Hyperparameters                                                        â”‚
â”‚   â”œâ”€ Baselines                                                              â”‚
â”‚   â”œâ”€ Datasets                                                               â”‚
â”‚   â”œâ”€ Training                                                               â”‚
â”‚   â”œâ”€ Metrics                                                                â”‚
â”‚   â””â”€ ... (17 total extractors)                                             â”‚
â”‚                                                                             â”‚
â”‚   Result: Complete raw data for all papers                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                             â”ƒ
â”ƒ                    ENHANCED VISUALIZATION ENGINE                            â”ƒ
â”ƒ                                                                             â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                 â”‚
                â–¼                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 1: QUERY ANALYSIS                    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  LLM Prompt:                                â”‚  â”‚
â”‚  "Analyze this query: {query}              â”‚  â”‚
â”‚   Extract intent, focus areas, viz type"   â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Output:                                    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ QueryAnalysis {                    â”‚    â”‚  â”‚
â”‚  â”‚   intent: "compare",               â”‚    â”‚  â”‚
â”‚  â”‚   focus_areas: ["training"],       â”‚    â”‚  â”‚
â”‚  â”‚   viz_type: "table",               â”‚    â”‚  â”‚
â”‚  â”‚   complexity: "medium"             â”‚    â”‚  â”‚
â”‚  â”‚ }                                  â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Fallback: Keyword matching if LLM fails   â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 2: BEST PRACTICES GENERATION         â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  LLM Prompt:                                â”‚  â”‚
â”‚  "Given intent={compare}, viz_type={table} â”‚  â”‚
â”‚   Generate 5-10 specific best practices"   â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Output:                                    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ Best Practices:                    â”‚    â”‚  â”‚
â”‚  â”‚ 1. Side-by-side table layout       â”‚    â”‚  â”‚
â”‚  â”‚ 2. Papers as columns               â”‚    â”‚  â”‚
â”‚  â”‚ 3. Highlight differences           â”‚    â”‚  â”‚
â”‚  â”‚ 4. Sticky headers                  â”‚    â”‚  â”‚
â”‚  â”‚ 5. Color-coded variations          â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Fallback: Template-based practices        â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 3: QUERY ENHANCEMENT                 â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  LLM Prompt:                                â”‚  â”‚
â”‚  "Enhance '{query}' using these practices: â”‚  â”‚
â”‚   {best_practices}                         â”‚  â”‚
â”‚   Make it specific and actionable"         â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Output:                                    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ Enhanced Query:                    â”‚    â”‚  â”‚
â”‚  â”‚ "Create detailed comparison table  â”‚    â”‚  â”‚
â”‚  â”‚  showing training procedures with  â”‚    â”‚  â”‚
â”‚  â”‚  papers as columns. Align training â”‚    â”‚  â”‚
â”‚  â”‚  attributes in rows. Highlight     â”‚    â”‚  â”‚
â”‚  â”‚  differences with color coding.    â”‚    â”‚  â”‚
â”‚  â”‚  Include hyperparameters inline.   â”‚    â”‚  â”‚
â”‚  â”‚  Use sticky headers."              â”‚    â”‚  â”‚
â”‚  â”‚                                    â”‚    â”‚  â”‚
â”‚  â”‚ Style Guidelines:                  â”‚    â”‚  â”‚
â”‚  â”‚   layout: "table with sticky h"    â”‚    â”‚  â”‚
â”‚  â”‚   colors: "red=unusual, green=ok"  â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 4: DATA SELECTION STRATEGY           â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Logic:                                     â”‚  â”‚
â”‚  1. Extractors from focus_areas            â”‚  â”‚
â”‚  2. Auto-add related extractors:           â”‚  â”‚
â”‚     "training" â†’ ["hyperparameters",       â”‚  â”‚
â”‚                   "metrics"]               â”‚  â”‚
â”‚  3. Set limits based on paper_count:       â”‚  â”‚
â”‚     3 papers â†’ generous limits             â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Output:                                    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ DataSelectionStrategy {            â”‚    â”‚  â”‚
â”‚  â”‚   extractors: [                    â”‚    â”‚  â”‚
â”‚  â”‚     "training",                    â”‚    â”‚  â”‚
â”‚  â”‚     "hyperparameters",             â”‚    â”‚  â”‚
â”‚  â”‚     "metrics"                      â”‚    â”‚  â”‚
â”‚  â”‚   ],                               â”‚    â”‚  â”‚
â”‚  â”‚   max_items: {                     â”‚    â”‚  â”‚
â”‚  â”‚     training: 10,                  â”‚    â”‚  â”‚
â”‚  â”‚     hyperparameters: 5,            â”‚    â”‚  â”‚
â”‚  â”‚     metrics: 15                    â”‚    â”‚  â”‚
â”‚  â”‚   },                               â”‚    â”‚  â”‚
â”‚  â”‚   include_cross_refs: true         â”‚    â”‚  â”‚
â”‚  â”‚ }                                  â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 5: DATA FILTERING                    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Process:                                   â”‚  â”‚
â”‚  1. For each paper, keep only selected     â”‚  â”‚
â”‚     extractors                             â”‚  â”‚
â”‚  2. Apply item limits                      â”‚  â”‚
â”‚  3. Add cross-paper insights               â”‚  â”‚
â”‚  4. Add metadata                           â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Before:                                    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ paper_1: {                         â”‚    â”‚  â”‚
â”‚  â”‚   contributions: [50 items],       â”‚    â”‚  â”‚
â”‚  â”‚   experiments: [20 items],         â”‚    â”‚  â”‚
â”‚  â”‚   architectures: [5 items],        â”‚    â”‚  â”‚
â”‚  â”‚   training: [3 items],             â”‚    â”‚  â”‚
â”‚  â”‚   ... (14 more extractors)         â”‚    â”‚  â”‚
â”‚  â”‚ }                                  â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  After:                                     â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ paper_1: {                         â”‚    â”‚  â”‚
â”‚  â”‚   training: [3 items],             â”‚    â”‚  â”‚
â”‚  â”‚   hyperparameters: [2 items],      â”‚    â”‚  â”‚
â”‚  â”‚   metrics: [5 items]               â”‚    â”‚  â”‚
â”‚  â”‚ }                                  â”‚    â”‚  â”‚
â”‚  â”‚ _cross_paper_insights: {           â”‚    â”‚  â”‚
â”‚  â”‚   common_metrics: ["accuracy"]     â”‚    â”‚  â”‚
â”‚  â”‚ }                                  â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  âœ“ Only relevant data                      â”‚  â”‚
â”‚  âœ“ Within limits                           â”‚  â”‚
â”‚  âœ“ No truncation                           â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 6: ENHANCED PROMPT BUILDING          â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Combines:                                  â”‚  â”‚
â”‚  âœ“ Original query                          â”‚  â”‚
â”‚  âœ“ Enhanced query                          â”‚  â”‚
â”‚  âœ“ Query analysis                          â”‚  â”‚
â”‚  âœ“ Best practices (numbered list)          â”‚  â”‚
â”‚  âœ“ Filtered data (JSON)                    â”‚  â”‚
â”‚  âœ“ Design system (exact colors)            â”‚  â”‚
â”‚  âœ“ Mandatory constraints                   â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Structure:                                 â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ <role>Designer</role>              â”‚    â”‚  â”‚
â”‚  â”‚ <task>Generate HTML</task>         â”‚    â”‚  â”‚
â”‚  â”‚ <original_query>...</original>     â”‚    â”‚  â”‚
â”‚  â”‚ <enhanced>...</enhanced>           â”‚    â”‚  â”‚
â”‚  â”‚ <analysis>...</analysis>           â”‚    â”‚  â”‚
â”‚  â”‚ <best_practices>                   â”‚    â”‚  â”‚
â”‚  â”‚   1. Practice 1                    â”‚    â”‚  â”‚
â”‚  â”‚   2. Practice 2                    â”‚    â”‚  â”‚
â”‚  â”‚   ...                              â”‚    â”‚  â”‚
â”‚  â”‚ </best_practices>                  â”‚    â”‚  â”‚
â”‚  â”‚ <data>{filtered JSON}</data>       â”‚    â”‚  â”‚
â”‚  â”‚ <design_system>                    â”‚    â”‚  â”‚
â”‚  â”‚   Colors: #exact #hex #codes       â”‚    â”‚  â”‚
â”‚  â”‚   Typography: 16px, system-ui      â”‚    â”‚  â”‚
â”‚  â”‚   Layout: 1400px max, grid         â”‚    â”‚  â”‚
â”‚  â”‚ </design_system>                   â”‚    â”‚  â”‚
â”‚  â”‚ <constraints>                      â”‚    â”‚  â”‚
â”‚  â”‚   âŒ No external CDNs              â”‚    â”‚  â”‚
â”‚  â”‚   âœ“ Use semantic HTML              â”‚    â”‚  â”‚
â”‚  â”‚ </constraints>                     â”‚    â”‚  â”‚
â”‚  â”‚ <output_instruction>               â”‚    â”‚  â”‚
â”‚  â”‚   Generate now                     â”‚    â”‚  â”‚
â”‚  â”‚ </output_instruction>              â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Result: Comprehensive, structured prompt  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  STAGE 7: HTML GENERATION                   â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  LLM Call:                                  â”‚  â”‚
â”‚  llm.complete(enhanced_prompt)             â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Post-Processing:                           â”‚  â”‚
â”‚  1. Remove markdown fences                 â”‚  â”‚
â”‚  2. Validate HTML structure                â”‚  â”‚
â”‚  3. Wrap if needed                         â”‚  â”‚
â”‚                                             â”‚  â”‚
â”‚  Output:                                    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚ <!DOCTYPE html>                    â”‚    â”‚  â”‚
â”‚  â”‚ <html>                             â”‚    â”‚  â”‚
â”‚  â”‚ <head>                             â”‚    â”‚  â”‚
â”‚  â”‚   <style>                          â”‚    â”‚  â”‚
â”‚  â”‚     /* Exact colors from design */ â”‚    â”‚  â”‚
â”‚  â”‚     /* Table layout as specified */â”‚    â”‚  â”‚
â”‚  â”‚   </style>                         â”‚    â”‚  â”‚
â”‚  â”‚ </head>                            â”‚    â”‚  â”‚
â”‚  â”‚ <body>                             â”‚    â”‚  â”‚
â”‚  â”‚   <table>                          â”‚    â”‚  â”‚
â”‚  â”‚     <!-- Papers as columns -->     â”‚    â”‚  â”‚
â”‚  â”‚     <!-- Training in rows -->      â”‚    â”‚  â”‚
â”‚  â”‚     <!-- Color-coded diffs -->     â”‚    â”‚  â”‚
â”‚  â”‚   </table>                         â”‚    â”‚  â”‚
â”‚  â”‚ </body>                            â”‚    â”‚  â”‚
â”‚  â”‚ </html>                            â”‚    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â”‚                             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RETURN TO API                                      â”‚
â”‚                                                                             â”‚
â”‚   HTML: Complete, self-contained visualization                             â”‚
â”‚                                                                             â”‚
â”‚   Metadata: {                                                               â”‚
â”‚     "original_query": "Compare training procedures across papers",         â”‚
â”‚     "enhanced_query": "Create detailed comparison table...",               â”‚
â”‚     "analysis": {                                                           â”‚
â”‚       "intent": "compare",                                                  â”‚
â”‚       "focus_areas": ["training", "hyperparameters", "metrics"],           â”‚
â”‚       "visualization_type": "table"                                         â”‚
â”‚     },                                                                      â”‚
â”‚     "best_practices_applied": [5 practices],                               â”‚
â”‚     "data_selection": {                                                     â”‚
â”‚       "extractors_used": ["training", "hyperparameters", "metrics"],       â”‚
â”‚       "priority_order": [...]                                               â”‚
â”‚     },                                                                      â”‚
â”‚     "paper_count": 3                                                        â”‚
â”‚   }                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND DISPLAYS                                    â”‚
â”‚                                                                             â”‚
â”‚   User sees:                                                                â”‚
â”‚   - Beautiful HTML visualization                                            â”‚
â”‚   - Exactly what they asked for                                             â”‚
â”‚   - With smart enhancements they didn't know to ask for                     â”‚
â”‚                                                                             â”‚
â”‚   Developer sees:                                                           â”‚
â”‚   - Metadata explaining what happened                                       â”‚
â”‚   - Which extractors were used                                              â”‚
â”‚   - What best practices were applied                                        â”‚
â”‚   - How the query was enhanced                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              KEY BENEFITS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ¯ SMART DATA SELECTION                                                    â”‚
â”‚     â”œâ”€ Only loads what's needed                                             â”‚
â”‚     â”œâ”€ Auto-adds related extractors                                         â”‚
â”‚     â”œâ”€ Context-aware limits (1 paper â‰  10 papers)                          â”‚
â”‚     â””â”€ Never truncates mid-JSON                                             â”‚
â”‚                                                                             â”‚
â”‚  ğŸ§  INTELLIGENT ENHANCEMENT                                                 â”‚
â”‚     â”œâ”€ Understands user intent                                              â”‚
â”‚     â”œâ”€ Generates query-specific best practices                              â”‚
â”‚     â”œâ”€ Transforms vague â†’ specific                                          â”‚
â”‚     â””â”€ Includes exact design specifications                                 â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“Š COMPREHENSIVE CONTEXT                                                   â”‚
â”‚     â”œâ”€ Original + enhanced query                                            â”‚
â”‚     â”œâ”€ Analysis breakdown                                                   â”‚
â”‚     â”œâ”€ Best practices list                                                  â”‚
â”‚     â”œâ”€ Filtered data (not dumped data)                                      â”‚
â”‚     â”œâ”€ Exact design system                                                  â”‚
â”‚     â””â”€ Clear constraints                                                    â”‚
â”‚                                                                             â”‚
â”‚  ğŸ”„ GRACEFUL FALLBACKS                                                      â”‚
â”‚     â”œâ”€ Query analysis: LLM â†’ keywords                                       â”‚
â”‚     â”œâ”€ Best practices: LLM â†’ templates                                      â”‚
â”‚     â”œâ”€ Enhancement: LLM â†’ structured patterns                               â”‚
â”‚     â””â”€ Never fails, always produces something                               â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ˆ TRANSPARENT METADATA                                                    â”‚
â”‚     â”œâ”€ Know what was analyzed                                               â”‚
â”‚     â”œâ”€ See what was filtered                                                â”‚
â”‚     â”œâ”€ Understand decisions made                                            â”‚
â”‚     â””â”€ Debug issues easily                                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
